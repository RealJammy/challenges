name: Build

on:
  push:
    branches:
      - master

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        challenge: ["Bootleg_Crypto", "Bootleg_Crypto_Again", "Finches_In_A_Pie", "Finches_In_A_Stack", "Not_Really_AI", "Puffer_Overflow", "Really_Simple_Algorithm", "Really_Small_Algorithm", "Really_Speedy_Algorithm", "Teleport", "access_0000", "collide", "emojasm_1", "emojasm_2", "pearlpearlpearl", "pybo", "quarantine", "raro"]
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Build challenge
      run: cd 2020/${{ matrix.challenge }} && docker build -t docker.pkg.github.com/ractf/challenges/${{ matrix.challenge }}:latest . && docker push docker.pkg.github.com/ractf/challenges/$${{ matrix.challenge }}:latest